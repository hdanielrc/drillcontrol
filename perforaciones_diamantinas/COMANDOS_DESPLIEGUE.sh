#!/bin/bash
# Comandos r√°pidos para desplegar desde tu laptop

echo "======================================================================"
echo "PREPARANDO C√ìDIGO PARA DESPLIEGUE"
echo "======================================================================"

# Verificar estado de Git
echo ""
echo "üìã Estado actual de Git:"
git status

echo ""
echo "======================================================================"
echo "Archivos listos para commit:"
echo "======================================================================"
echo "  ‚úÖ drilling/views.py (cache + optimizaciones)"
echo "  ‚úÖ drilling/models.py (HistorialBroca + m√©todos optimizados)"
echo "  ‚úÖ settings.py (connection pooling)"
echo "  ‚úÖ requirements.txt (django-db-connection-pool)"
echo "  ‚úÖ .env.production (template para servidor)"
echo "  ‚úÖ deploy.sh (script de despliegue)"
echo "  ‚úÖ DESPLIEGUE.md (documentaci√≥n)"
echo "  ‚úÖ preload_cache.py (precarga de cache)"
echo ""

echo "======================================================================"
echo "Comandos para desplegar:"
echo "======================================================================"
echo ""
echo "1Ô∏è‚É£  Commit y push desde tu laptop:"
echo "    git add ."
echo "    git commit -m 'Optimizaciones de performance: cache, connection pooling, bulk operations'"
echo "    git push origin main"
echo ""
echo "2Ô∏è‚É£  Conectar al servidor:"
echo "    ssh root@138.197.203.247"
echo ""
echo "3Ô∏è‚É£  En el servidor, ir al proyecto y ejecutar:"
echo "    cd /ruta/al/proyecto/perforaciones_diamantinas"
echo "    git pull origin main"
echo "    chmod +x deploy.sh"
echo "    ./deploy.sh"
echo ""
echo "4Ô∏è‚É£  Reiniciar servicios:"
echo "    sudo systemctl restart gunicorn"
echo "    sudo systemctl restart nginx"
echo ""
echo "======================================================================"
echo "üìä Mejoras esperadas en PRODUCCI√ìN (servidor con DB local):"
echo "======================================================================"
echo "  ‚Ä¢ Latencia queries: 160ms ‚Üí <5ms (97% m√°s r√°pido)"
echo "  ‚Ä¢ Carga formulario: 1300ms ‚Üí ~50ms (96% m√°s r√°pido)"
echo "  ‚Ä¢ Creaci√≥n turno: 800ms ‚Üí ~100ms (87% m√°s r√°pido)"
echo "  ‚Ä¢ Queries formulario: 9 ‚Üí 6 (33% menos)"
echo ""
